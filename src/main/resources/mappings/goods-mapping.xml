<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="GoodsDAO">

	<resultMap id="goodsResult" type="goods">
		<id property="seq" column="SEQ"/>
		<result property="name" column="NAME"/>
		<result property="price" column="PRICE"/>
		<result property="stock" column="STOCK"/>
		<result property="detail1" column="DETAIL1"/>
		<result property="detail2" column="DETAIL2"/>
		<result property="detail3" column="DETAIL3"/>
		<result property="detail4" column="DETAIL4"/>
		<result property="detail5" column="DETAIL5"/>
		<result property="pimage" column="PIMAGE"/>
		<result property="regDate" column="REGDATE"/>
	</resultMap>

	<insert id="insertGoods" parameterType="goods">
		<![CDATA[
			insert into goods(seq, name, price, stock, detail1, detail2, detail3, detail4, detail5, pimage)
			values((select COALESCE(max(seq), 1000)+1 from goods),#{name},#{price},#{stock},#{detail1},#{detail2},#{detail3},#{detail4},#{detail5},#{pimage})
		]]>
	</insert>
	
	<update id="updateNotice">
		<![CDATA[
			update board set title=#{title}, content=#{content} where seq=#{seq}
		]]>
	</update>
	
	<delete id="deleteNotice">
		<![CDATA[
			delete board where seq=#{seq}
		]]>
	</delete>
	
	<select id="getNotice" resultType="goods">
		<![CDATA[
			select * from board where seq=#{seq}
		]]>
	</select>
	
	<select id="getNoticeList" resultMap="notice">
		select * from notice
		where
		<if test="searchCondition == 'TITLE'">
			title like '%',#{searchKeyword},'%'
		</if>
		<if test="searchCondition == 'CONTENT'">
			content like '%',#{searchKeyword},'%'
		</if>
		order by seq desc
	</select>
</mapper>